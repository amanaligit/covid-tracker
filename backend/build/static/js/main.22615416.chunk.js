(this["webpackJsonpcovid-tracker-frontend"]=this["webpackJsonpcovid-tracker-frontend"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),c=a(88),r=a.n(c),i=(a(102),a(7)),l=(a(103),a(14)),o=a(3),d=a.n(o),j=a(12),b=a(24),m=a.n(b),u=a(8),p=a(19),O=a(29),h=a(30),x=a(18),v=a(11),f=a(1);var g=function(e){var t=e.setSignedIn,a=e.signedIn,n=Object(s.useState)(null),c=Object(i.a)(n,2),r=c[0],o=c[1],b=function(){var e=Object(j.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.a.post("".concat("/","auth/login"),a).then((function(e){var a;localStorage.setItem("jwtToken",null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.token),t(!0)})).catch((function(e){var t,a;o(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=v.c({email:v.e().email("invalid email").required("email is required"),password:v.e().required("password is required")}),N=Object(x.d)({resolver:Object(h.a)(g),mode:"onChange"}),w=N.register,y=N.handleSubmit,S=N.formState.errors;return a?Object(f.jsx)(u.a,{to:"/update-form"}):Object(f.jsx)("div",{className:"global-container",children:Object(f.jsx)("div",{className:"card login-form",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h3",{className:"card-title text-center ",children:"Log in to Covid Tracker"}),Object(f.jsx)("div",{className:"card-text",children:Object(f.jsxs)("form",{onSubmit:y(b),children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email"}),Object(f.jsx)("input",Object(l.a)({type:"text",className:"form-control form-control-sm",id:"exampleInputEmail1","aria-describedby":"emailHelp"},w("email"))),(null===S||void 0===S?void 0:S.email)&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:Object(f.jsx)("span",{children:S.email.message})})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(f.jsx)("input",Object(l.a)({type:"password",className:"form-control form-control-sm",id:"exampleInputPassword1"},w("password"))),(null===S||void 0===S?void 0:S.password)&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:Object(f.jsx)("span",{children:S.password.message})})]}),r&&Object(f.jsx)("div",{className:"alert alert-danger mt-2 text-center",children:Object(f.jsx)("span",{children:r})}),Object(f.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",children:[Object(f.jsx)(O.a,{})," Sign in"]}),Object(f.jsxs)("div",{className:"sign-up",children:["Don't have an account? ",Object(f.jsx)(p.b,{to:"register",children:"Create One"})]})]})})]})})})};var N=function(){var e=Object(s.useState)(null),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(!1),r=Object(i.a)(c,2),o=r[0],b=r[1],u=v.c({fullname:v.e().required("Name is required"),email:v.e("invalid email").email("invalid email").required("email is required"),password:v.e().min(8,"password is too weak").matches(/^([a-z])(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])[A-Za-z\d@$!%*#?&]{8,24}$/,"Must Contain minimum 8 Characters, One Uppercase, One Lowercase, One Number and one special case Character except the first character").required("password is required"),phone:v.e().matches(/^[6-9]\d{9}$/,{message:"Please enter valid 10 digit phone-number.",excludeEmptyString:!1}),passwordConfirmation:v.e().oneOf([v.d("password"),null],"Passwords must match")}),g=Object(x.d)({resolver:Object(h.a)(u),mode:"onChange",defaultValues:{fullname:"",email:"",phone:"",password:"",passwordConfirmation:""}}),N=g.register,w=g.handleSubmit,y=g.formState,S=y.errors,C=y.dirtyFields,k=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.a.post("".concat("/","auth/user"),t).then((function(e){b(!0)})).catch((function(e){n(e.response.data.message)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"global-container",children:Object(f.jsx)("div",{className:"card login-form",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsx)("h3",{className:"card-title text-center",children:"Register to Covid Tracker"}),Object(f.jsx)("div",{className:"card-text",children:Object(f.jsxs)("form",{onSubmit:w(k),children:[Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"fullname",children:"Full Name"}),Object(f.jsx)("input",Object(l.a)({type:"text",className:"form-control ".concat(C.fullname?S.fullname?"is-invalid":"is-valid":""),id:"fullname"},N("fullname"))),S.fullname&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:Object(f.jsx)("span",{children:S.fullname.message})})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{children:"Email"}),Object(f.jsx)("input",Object(l.a)({className:"form-control ".concat(C.email?S.email?"is-invalid":"is-valid":"")},N("email"))),S.email&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:Object(f.jsx)("span",{children:S.email.message})})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"phone",children:"Phone Number"}),Object(f.jsx)("input",Object(l.a)({type:"text",className:"form-control ".concat(C.phone?S.phone?"is-invalid":"is-valid":""),id:"phone"},N("phone"))),S.phone&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:Object(f.jsx)("span",{children:S.phone.message})})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",Object(l.a)({type:"password",className:"form-control ".concat(C.password?S.password?"is-invalid":"is-valid":""),id:"password"},N("password"))),S.password&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:Object(f.jsx)("span",{children:S.password.message})})]}),Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsx)("label",{htmlFor:"passwordConfirmation",children:"Confirm Password"}),Object(f.jsx)("input",Object(l.a)({type:"password",className:"form-control ".concat(C.passwordConfirmation?S.passwordConfirmation?"is-invalid":"is-valid":""),id:"passwordConfirmation"},N("passwordConfirmation"))),S.passwordConfirmation&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:Object(f.jsx)("span",{children:S.passwordConfirmation.message})})]}),Object(f.jsxs)("button",{type:"submit",className:"btn btn-primary btn-block",children:[Object(f.jsx)(O.a,{})," Sign up"]}),a&&Object(f.jsx)("div",{className:"alert alert-danger mt-2 text-center",children:Object(f.jsx)("span",{children:a})}),o&&Object(f.jsx)("div",{className:"alert alert-success mt-2 text-center",children:Object(f.jsx)("span",{children:"Your account has been created successfully! Please login to continue."})}),Object(f.jsxs)("div",{className:"sign-up",children:["Already have an account? ",Object(f.jsx)(p.b,{to:"/login",children:"Log in"})]})]})})]})})})},w=a(6),y=a(55),S=a(93);var C=function(e){var t=e.signedIn,a=localStorage.getItem("jwtToken"),n=Object(s.useState)(1),c=Object(i.a)(n,2),r=c[0],o=c[1],b=Object(s.useState)(null),p=Object(i.a)(b,2),O=p[0],g=p[1],N=Object(s.useState)(!1),C=Object(i.a)(N,2),k=C[0],I=C[1],P=Object(s.useState)([]),F=Object(i.a)(P,2),E=F[0],q=F[1],T=v.c({entries:v.a().of(v.c().shape({state_id:v.b("Please select a state").typeError("Please select a state").required("Please select a state"),newcases:v.b().positive("number must be positive").typeError("you must specify a number").required("Please enter a number")}))}),A=Object(x.d)({resolver:Object(h.a)(T),mode:"onChange"}),L=A.register,z=A.handleSubmit,D=A.reset,_=A.formState.errors;Object(s.useEffect)((function(){m.a.get("".concat("/","api/states"),{headers:{"x-access-token":a}}).then((function(e){q(e.data)})).catch((function(e){var t,a;g(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)}))}),[a]);var R=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:I(!1),t.entries=t.entries.slice(0,r),m.a.post("".concat("/","api/data"),t.entries,{headers:{"x-access-token":a}}).then((function(e){I(!0),setTimeout((function(){I(!1)}),5e3),o(1),D()})).catch((function(e){g(e.response.data.message)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return t?Object(f.jsx)("div",{className:"global-container",children:Object(f.jsx)("div",{className:"card update-form",children:Object(f.jsxs)("div",{className:"card-body",children:[Object(f.jsxs)("h3",{className:"card-title text-center",children:[Object(f.jsx)(y.a,{})," Add active COVID-19 cases:"]}),Object(f.jsxs)("div",{className:"card-text",children:[k&&Object(f.jsxs)("div",{className:"alert alert-success mb-4",role:"alert",children:[Object(f.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(f.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),Object(f.jsx)("strong",{children:"Success!"})," Database has been updated successfully"]}),Object(f.jsxs)("form",{onSubmit:z(R),children:[Object(w.a)(Array(r).keys()).map((function(e){var t,a,s,n,c,r,i,o,d,j,b;return Object(f.jsxs)("div",{className:"form-group",children:[Object(f.jsxs)("label",{children:["Entry: ",e+1," "]}),Object(f.jsxs)("select",Object(l.a)(Object(l.a)({name:"entries.".concat(e,".state_id")},L("entries.".concat(e,".state_id"))),{},{className:"form-control ".concat((null===(t=_.entries)||void 0===t||null===(a=t[e])||void 0===a||null===(s=a.state_id)||void 0===s?void 0:s.message)?"is-invalid":""),children:[Object(f.jsx)("option",{value:"",children:"Select State..."}),E.map((function(e,t){return Object(f.jsx)("option",{value:e.state_id,children:e.name},t)}))]})),Object(f.jsx)("label",{htmlFor:"cases",children:"Active Covid Cases:"}),Object(f.jsx)("input",Object(l.a)({type:"number",min:"0",className:"form-control ".concat((null===(n=_.entries)||void 0===n||null===(c=n[e])||void 0===c||null===(r=c.newcases)||void 0===r?void 0:r.message)?"is-invalid":""),placeholder:"Enter active covid cases in this state",id:"cases",name:"entries.".concat(e,".newcases")},L("entries.".concat(e,".newcases")))),(null===(i=_.entries)||void 0===i||null===(o=i[e])||void 0===o?void 0:o.newcases)&&Object(f.jsx)("div",{className:"alert alert-danger mt-2",children:Object(f.jsx)("span",{children:null===(d=_.entries)||void 0===d||null===(j=d[e])||void 0===j||null===(b=j.newcases)||void 0===b?void 0:b.message})})]},e)})),Object(f.jsxs)("div",{className:"row justify-content-center m-4",children:[Object(f.jsxs)("button",{className:"btn btn-danger m-2",type:"button",onClick:function(){return o((function(e){return e+1}))},children:[Object(f.jsx)(y.a,{style:{fontSize:"1.3rem"}})," Add an Entry"]}),r>1&&Object(f.jsxs)("button",{className:"btn btn-danger m-2",type:"button",onClick:function(){return o((function(e){return e-1}))},children:[Object(f.jsx)(S.a,{style:{fontSize:"1.3rem"}})," Remove Entry"]})]}),Object(f.jsx)("p",{children:"*Click on add entry to insert multiple entries in the database in one go."}),Object(f.jsx)("button",{type:"submit",className:"btn btn-primary btn-block",children:"Submit"}),O&&Object(f.jsx)("div",{className:"alert alert-danger mt-2 text-center",children:Object(f.jsx)("span",{children:O})})]})]})]})})}):Object(f.jsx)(u.a,{to:"/"})},k=a(94);var I=function(e){var t=e.setSignedIn;return Object(f.jsx)("div",{children:Object(f.jsxs)("button",{className:"btn mt-0 btn-danger",onClick:function(){localStorage.removeItem("jwtToken"),t(!1)},style:{fontSize:"1.25rem"},children:[Object(f.jsx)(k.a,{}),"Logout"]})})},P=a(96),F=a(95),E=a(97);var q=function(e){var t=e.signedIn,a=e.setSignedIn;return Object(f.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:[Object(f.jsxs)("a",{className:"navbar-brand ",href:"/",children:["COVID-19 Tracker ",Object(f.jsx)(F.a,{})]}),Object(f.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(f.jsx)("span",{className:"navbar-toggler-icon"})}),Object(f.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(f.jsxs)("ul",{className:"navbar-nav mr-auto  text-center",children:[Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsxs)(p.b,{className:"nav-link ".concat(t?"disabled":null),to:"/",children:[Object(f.jsx)(P.a,{})," Login"]})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsxs)(p.b,{className:"nav-link ".concat(t?"disabled":null),to:"/register",children:[Object(f.jsx)(O.a,{})," Register"]})}),Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsxs)(p.b,{className:"nav-link ".concat(t?null:"disabled"),to:"/update-form",children:[Object(f.jsx)(E.a,{})," Update Covid-19 data"]})})]}),Object(f.jsx)("span",{className:"navbar-text float-right",children:t?Object(f.jsx)(I,{setSignedIn:a}):Object(f.jsx)(f.Fragment,{children:"Not signed in."})})]})]})};var T=function(e){var t=Object(s.useState)(null!==localStorage.getItem("jwtToken")),a=Object(i.a)(t,2),n=a[0],c=a[1];return Object(f.jsx)("div",{style:{height:"100%"},children:Object(f.jsxs)(p.a,{children:[Object(f.jsx)(q,{signedIn:n,setSignedIn:c}),Object(f.jsx)("div",{className:"app",children:Object(f.jsxs)(u.d,{children:[Object(f.jsx)(u.b,{path:"/",exact:!0,component:function(){return Object(f.jsx)(g,{signedIn:n,setSignedIn:c})}}),Object(f.jsx)(u.b,{path:"/register",exact:!0,component:function(){return Object(f.jsx)(N,{signedIn:n})}}),Object(f.jsx)(u.b,{path:"/update-form",exact:!0,component:function(){return Object(f.jsx)(C,{signedIn:n})}})]})})]})})},A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,227)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),c(e),r(e)}))};r.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(T,{})}),document.getElementById("root")),A()}},[[226,1,2]]]);
//# sourceMappingURL=main.22615416.chunk.js.map